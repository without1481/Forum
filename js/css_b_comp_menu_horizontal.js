/*=======================================================================*\
|| ###################################################################### ||
|| # vBulletin 5.3.4
|| # ------------------------------------------------------------------ # ||
|| # Copyright 2000-2017 vBulletin Solutions Inc. All Rights Reserved.  # ||
|| # This file may not be redistributed in whole or significant part.   # ||
|| # ----------------- VBULLETIN IS NOT FREE SOFTWARE ----------------- # ||
|| # http://www.vbulletin.com | http://www.vbulletin.com/license.html   # ||
|| ###################################################################### ||
\*========================================================================*/
window.vBulletin=window.vBulletin||{};window.vBulletin.phrase=window.vBulletin.phrase||{};window.vBulletin.phrase.precache=window.vBulletin.phrase.precache||[];window.vBulletin.phrase.precache=$.merge(window.vBulletin.phrase.precache,["more_options"]);window.vBulletin.CompMenuHorizontal=window.vBulletin.CompMenuHorizontal||{};window.vBulletin.jsexec=window.vBulletin.jsexec||{};window.vBulletin.jsexec.css_b_comp_menu_horizontal=window.vBulletin.jsexec.css_b_comp_menu_horizontal||{exec:0,init:0};window.vBulletin.jsexec.css_b_comp_menu_horizontal.exec++;(function(C){var D=[];function M(S,Q,R){function U(V,W){if(V.is("."+W)){V.removeClass(W);var X=V.data("removed-classes")||[];if(C.inArray(W,X)==-1){X.push(W)}V.data("removed-classes",X)}}function T(V,X){if(!V.is("."+X)){V.addClass(X);var W=V.data("added-classes")||[];if(C.inArray(X,W)==-1){W.push(X)}V.data("added-classes",W)}}S.each(function(){var V=C(this);C.each(Q,function(W,X){U(V,X)});C.each(R,function(W,X){T(V,X)})})}function A(Q){Q.each(function(){var R=C(this),T=R.data("added-classes")||[],S=R.data("removed-classes")||[];if(T.length){R.removeClass(T.join(" "))}if(S.length){R.addClass(S.join(" "))}})}function L(Q){D.push(Q)}function G(Q,R,S){C.each(D,function(T,U){U(Q,R,S)})}function N(S,T,U){if(!S.is(".js-comp-menu-dropdown__content--main-menu")){return }if(U=="dropdown"){var R=S.find(".current").addClass("b-comp-menu-dropdown__content-item--current");T.addClass("b-comp-menu-dropdown--main-menu").find(".js-comp-menu-dropdown__trigger").addClass("b-comp-menu-dropdown__trigger--icon-trigger").html('<span class="b-icon b-icon__hamburger b-comp-menu-dropdown__trigger-icon"></span>');S.find("li").first().addClass("b-comp-menu-dropdown__content-item--divider");var Q='<li class="js-search-item b-comp-menu-dropdown__content-item--no-hover js-comp-menu-dropdown__content-maintain-menu"><form action="'+C("#searchForm").attr("action")+'"><input type="text" autocomplete="off" class="b-form-input__input search-term" placeholder="'+vBulletin.phrase.get("search")+'..." name="q"><button title="'+vBulletin.phrase.get("search")+'" class="search-btn" type="submit"><span class="vb-icon vb-icon-search"></span></button></form></li><li class="js-search-item"><a href="'+pageData.baseurl+'/search">'+vBulletin.phrase.get("advanced_search")+"</a></li>";C(Q).prependTo(S);C(".js-channel-subtabbar-list li").addClass("js-subtabbar-item b-comp-menu-dropdown__content-item--indent1").insertAfter(R)}else{S.find("li").removeClass("b-comp-menu-dropdown__content-item--divider b-comp-menu-dropdown__content-item--current b-comp-menu-dropdown__content-item--indent1");S.find(".js-search-item").remove();S.find(".js-subtabbar-item").appendTo(C(".js-channel-subtabbar-list"))}}function I(Q,R,S){if(!Q.is(".js-footer-nav-list")){return }if(S=="dropdown"){M(Q,["h-right"],[]);M(R,[],["js-select-on-xsmall"]);var T=C("<li></li>").append(R).appendTo(".js-footer-chooser-list");Q.data("vb-remove-li",T)}else{Q.insertAfter(".js-footer-chooser-list");Q.data("vb-remove-li").remove()}}function E(R,T,U){if(U=="dropdown"){var V=R.find(".js-comp-menu--exclude-from-dropdown");if(V.length>0){var Q=C("<ul />").addClass(R.get(0).className).removeClass("js-comp-menu-horizontal js-comp-menu--dropdown-on-xsmall js-comp-menu--dropdown-on-small b-comp-menu-dropdown--inactive").insertAfter(T);R.data("vb-exclude-item-container",Q);V.each(function(W,X){var Y=C(this);C("<li />").addClass("js-excluded-item-marker h-hide-imp").data("vb-excluded-item",Y).insertAfter(Y)});V.appendTo(Q)}}else{var Q=R.data("vb-exclude-item-container"),S=R.find(".js-excluded-item-marker");if(Q&&Q.length&&Q.length>0&&S.length>0){S.each(function(W,Y){var X=C(this);X.data("vb-excluded-item").insertAfter(X)});S.remove();R.data("vb-exclude-item-container",false);Q.remove()}}}function P(Q,Y,X){if(!Q.is(".js-module-tab-menu")){return }var V=Q.closest(".widget-tabs-nav, .js-widget-tabs-nav"),T=V.find(".module-title, .js-module-title"),R=Q.find("li"),S=R.filter(".ui-state-active"),Z=Q.find("a");V.addClass("js-widget-tabs-nav");T.addClass("js-module-title");function W(b){var a=C(this),c=a.closest("li");R.removeClass("b-comp-menu-dropdown__content-item--current ui-tabs-active ui-state-active ui-state-hover ui-state-default");c.addClass("b-comp-menu-dropdown__content-item--current")}if(X=="dropdown"){M(Q,["ui-tabs-nav","ui-helper-reset","ui-helper-clearfix","ui-widget-header","ui-corner-all"],[]);M(Y,[],["js-select-on-xsmall"]);M(V,["widget-tabs-nav"],["widget-tabs-nav-background"]);M(T,["module-title"],[]);M(R,["ui-helper-reset","ui-helper-clearfix","ui-widget-header","ui-corner-all","ui-corner-bottom","ui-corner-top","ui-corner-right","ui-corner-left","ui-corner-br","ui-corner-bl","ui-corner-tr","ui-corner-tl"],[]);M(Z,["ui-tabs-anchor","h-block"],[]);if(S.length){S.addClass("b-comp-menu-dropdown__content-item--current")}else{setTimeout(function(){var d=R.filter(".ui-state-active");d.addClass("b-comp-menu-dropdown__content-item--current");var a=Y.data("vb-using-select"),b=Y.data("vb-select-el"),c=0;if(a&&b&&b.length){R.each(function(e,f){c=e;if(C(f).is(".ui-state-active")){return false}});b.get(0).selectedIndex=c}},0)}R.removeClass("ui-state-default ui-tabs-active ui-state-active ui-state-hover");Z.off("click.vbmoduletabs").on("click.vbmoduletabs",W);Y.data("add-classes-to-select-el","h-margin-vert-m h-margin-horiz-xl")}else{var U=Y.data("vb-select-el");if(U&&U.length){U.remove()}R.filter(function(){return(C(this).attr("aria-selected")=="true")}).removeClass("b-comp-menu-dropdown__content-item--current").addClass("ui-tabs-active ui-state-active");Z.off("click.vbmoduletabs");A(V);A(T)}}function F(R,T,V){if(!R.is(".js-groupblog-admin-menu")){return }var S=R.closest(".js-blog-admin-left"),Q=R.find("li"),U=Q.filter(".sgAdminActive, .blogAdminActive");if(V=="dropdown"){M(T,[],["js-select-on-xsmall"]);U.addClass("b-comp-menu-dropdown__content-item--current")}else{}}function K(S,T,U){if(!S.is(".js-sharing-menu")){return }var R=S.find("li");if(U=="dropdown"){var Q=S.prevAll(".userinfo");if(Q.length==1){T.appendTo(Q);S.data("vb-moved-to-userinfo","1")}M(S,["b-sharing-menu--horizontal"],[]);M(T,[],["h-align-bottom"]);M(R,[],["b-comp-menu-dropdown__content-item--no-hover","js-comp-menu-dropdown__content-maintain-menu"])}else{if(S.data("vb-moved-to-userinfo")=="1"){var Q=T.parent(".userinfo");S.insertAfter(Q).data("vb-moved-to-userinfo","0")}A(R)}}function J(Q,T){if(T=="dropdown"){var X=Q.data("dropdown-icon-classes")||"",c=X?" b-comp-menu-dropdown__trigger--icon-trigger":"",U=(Q.data("dropdown-trigger-classes")||"")+c,b=Q.data("dropdown-trigger-phrase")||"more_options",V=Q.data("dropdown-menu-classes")||"",W=C('<div class="b-comp-menu-dropdown js-comp-menu-dropdown '+V+'"> <div class="b-comp-menu-dropdown__trigger js-comp-menu-dropdown__trigger js-button '+U+'" tabindex="0"> <span class="'+X+' b-comp-menu-dropdown__trigger-icon"> '+vBulletin.phrase.get(b)+" </span>  </div> </div>");W.insertAfter(Q);G(Q,W,T);var R=Q.find("li"),Z=Q.find("a");var S=["h-right","h-left"];C.each(S,function(d,e){if(Q.is("."+e)){W.addClass(e)}});var a=Q.data("dropdown-content-classes"),Y=["b-comp-menu-dropdown__content","js-comp-menu-dropdown__content"];if(a){a=a.split(" ")}else{a=[]}C.each(a,function(d,e){Y.push(e)});M(Q,["h-margin-top-s","h-right","b-comp-menu-horizontal","channel-tabbar-list","h-hide-on-small","nav-list"],Y);M(R,["h-margin-top-xs","b-post-control","b-post-control--responsive"],["b-comp-menu-dropdown__content-item"]);M(Z,["h-left"],["h-block"]);Q.appendTo(W);vBulletin.CompMenuDropdown.init()}else{vBulletin.CompMenuDropdown.updateMenuAsSelectElement();var R=Q.find("li"),Z=Q.find("a");A(Q);A(R);A(Z);var W=Q.closest(".js-comp-menu-dropdown");Q.insertAfter(W);G(Q,W,T);W.remove()}}function B(R,Q){H()}function H(){var R=C(".js-comp-menu-horizontal");if(R.length){var T=C("body"),S=T.is(".l-small"),Q=T.is(".l-xsmall");R.each(function(U){var X=C(this),W=X.find("li").not(".b-post-control--disabled").length;var V=((S&&X.is(".js-comp-menu--dropdown-on-small"))||(Q&&X.is(".js-comp-menu--dropdown-on-xsmall")));if(V&&W>0){if(!X.data("is-dropdown-menu")){J(X,"dropdown");X.data("is-dropdown-menu","1")}}else{if(X.data("is-dropdown-menu")){J(X,"horizontal");X.data("is-dropdown-menu","")}}})}}function O(){L(N);L(I);L(E);L(P);L(F);L(K);H();if(window.vBulletin.jsexec.css_b_comp_menu_horizontal.init<1){vBulletin.Responsive.Debounce.registerCallback(H);C(document).on("vb-loadnewposts",B);C(document).on("vb-filterposts",B)}window.vBulletin.jsexec.css_b_comp_menu_horizontal.init++}vBulletin.CompMenuHorizontal.registerMenuChangeFilter=L;vBulletin.CompMenuHorizontal.checkHorizontalMenuState=H;C(O)})(jQuery);